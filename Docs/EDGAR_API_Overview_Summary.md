# EDGAR API Overview – Summary and Next Steps

This note summarizes how **Docs/api-overview.pdf** (EDGAR Next APIs) relates to CommonSense and what you need to **download the latest financial reports** for searched companies.

---

## 1. What the PDF Covers (EDGAR Next – Filer APIs)

The **api-overview.pdf** describes **EDGAR Next** application programming interfaces for **filers** – i.e. for **submitting** filings to the SEC and **managing filer accounts**. It does **not** describe how to **download** or **retrieve** already-filed public data.

| In the PDF | Purpose |
|------------|--------|
| **Submission API** | Submit filings to EDGAR (machine-to-machine). |
| **Submission Status API** | Check status of submissions (filer API token + accession number). |
| **EDGAR Operational Status API** | Check if EDGAR is accepting submissions / within hours. |
| **Filer Management APIs** | Add/remove individuals, roles, delegations, view account, CCC, verify credentials. |

**Authentication in the PDF:**  
For these APIs the SEC requires:

- **Filer API token** – generated by a technical administrator from the EDGAR Filer Management website (for the filer’s EDGAR account/CIK).
- **User API token** – generated by each user on their EDGAR dashboard (Login.gov, MFA).
- **Technical administrators** – at least two must be authorized; they generate/provide the filer API token to the filing application.

So the PDF is about **who files with the SEC** and **how they authenticate** when using EDGAR Next APIs to submit or manage accounts. It is **not** about **reading** public company filings (10-K, 10-Q, company facts, etc.).

---

## 2. What CommonSense Needs (Download Latest Financial Reports)

CommonSense’s goal is to **download the latest financial reports** (e.g. 10-K, 10-Q) for **searched companies**. That uses **public EDGAR data**, not the APIs in the PDF.

| Data we need | How it’s provided | Auth / setup |
|--------------|-------------------|-------------|
| Company → CIK, filings list | SEC public sources (e.g. `company_tickers.json`, `ticker.txt`, Archives/edgar) | **User-Agent** with contact info (email). No API tokens. |
| Filing documents (10-K, 10-Q, XBRL) | `data.sec.gov`, `www.sec.gov/Archives/edgar` | Same: **User-Agent** with contact info. |

So:

- **No changes** are required to our **ingestion design** based on the **api-overview.pdf**. That document does not define or change how public data is retrieved.
- **No filer API token or user API token** is needed to **download** public financial reports. Those tokens are for **submitting** filings and **managing filer accounts** (EDGAR Next).

---

## 3. Changes Needed for Our Ingestion (Download Path)

To reliably **download the latest financial reports** for searched companies, the following are the relevant levers (not the filer APIs from the PDF):

1. **User-Agent (contact identity)**  
   - Keep using **EDGAR_EMAIL** (or **EDGAR_IDENTITY**) as we do today.  
   - SEC expects a descriptive User-Agent for fair access; no sign-up or “account” is required for **retrieval**.

2. **Ticker vs CIK**  
   - We resolve **ticker → CIK** via the SEC `company_tickers.json` API first; if that fails, edgartools is tried. We also **discover which forms** to request from each company’s submissions (10-K, 10-Q, 20-F, 40-F that they actually file).  
   - **Use CIK** when ticker lookup still fails (e.g. `320193` for Apple, `353278` for Novo Nordisk). Ingestion accepts numeric CIKs and skips the ticker-file fetch.

3. **Rate limits**  
   - SEC public access is subject to rate limits (e.g. 10 requests/second). Our ingestion already adds a small delay between companies; no change required from the PDF.

4. **Optional: direct SEC URLs**  
   - If we ever bypass edgartools for robustness, we would call **public** endpoints only (e.g. `data.sec.gov`, `www.sec.gov/Archives/edgar`, RSS). Still only **User-Agent** (contact email), no filer/user API tokens.

So: **no account or token setup from the PDF is needed** to download latest financial reports. The only “setup” for our use case is a **contact email in the User-Agent** (already in place via EDGAR_EMAIL).

---

## 4. Next Steps – Setup to Operate (User-Agent / “Accounts”)

### For **downloading** latest financial reports (our current scope)

1. **Set contact identity (User-Agent)**  
   - In `.env`: `EDGAR_EMAIL=your.name@example.com` (or use the dashboard field).  
   - Optional: `EDGAR_IDENTITY="Your Name your@email.com"` if you want a full string.  
   - No SEC “account” or API token is required for public data.

2. **Run ingestion**  
   - Use **tickers** (e.g. AAPL) when ticker lookup works.  
   - If you see “Both data sources are unavailable” or hishel/cache errors, use **CIK** (e.g. `320193` for Apple). See [EDGAR_Ingestion_Troubleshooting.md](EDGAR_Ingestion_Troubleshooting.md).

3. **Optional: keep edgartools cache writable**  
   - If you hit permission errors on `~/.edgar`, either allow write access there or set `EDGAR_LOCAL_DATA_DIR` to a writable path (e.g. `data/.edgar`). Details in the troubleshooting doc.

No other “accounts” or “user agents” are required to operate the **download** path.

### If you ever need **EDGAR Next APIs** (submit filings / manage filer accounts)

Only relevant if CommonSense or your organization will **submit** filings to the SEC (not just read them). Then you would:

1. Use the **EDGAR Filer Management** website; have at least two **technical administrators** authorized.  
2. **Technical administrators** log in (Login.gov, MFA), generate a **filer API token** for the relevant EDGAR account/CIK, and provide it securely to your application.  
3. **Users** who will call the APIs log in to the EDGAR dashboard, generate their **user API token**, and provide it to the application.  
4. The application sends **filer API token** and (where required) **user API token** in API requests, as described in the PDF.

This is **out of scope** for “download latest financial reports for searched companies.”

---

## 5. Short Reference

| Goal | Use | Auth / setup |
|------|-----|--------------|
| **Download** latest 10-K, 10-Q, etc. (CommonSense) | Public EDGAR data (edgartools / data.sec.gov / Archives) | **User-Agent** with contact email (EDGAR_EMAIL). No tokens. |
| **Submit** filings / manage filer accounts (EDGAR Next) | APIs in **api-overview.pdf** | **Filer API token** + **User API token**; technical admins; Login.gov. |

For our current goal (download latest financial reports), **no changes are required** from the api-overview.pdf. Set **EDGAR_EMAIL** (and use **CIK** when needed); no additional accounts or user agents are needed to operate.
